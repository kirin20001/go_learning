# SQL优化

- 从数据库角度出发主要包括
  - 减少磁盘IO
  - 减少内存CPU消耗
- 优化步骤
  - EXPLAIN命令查看执行计划
  - 尝试优化
- 选择合适的索引列
  - 外键
  - 频繁出现在WHERE中的列
  - 频繁出现在ORDER BY中的列
  - 区分度很高的列
- 大表表定义变更
  - 修改表定义数据库会加表锁，直到修改完成
  - 停机变更
  - 业务低谷变更
  - 创建新表

### 优化案例

- 覆盖索引
  - 避免回表
- 优化ORDER BY
  - 将排序列加入索引
- 优化COUNT
  - 预估
- 索引提示优化
  - 使用正确的索引
- 用WHERE替换HAVING
- 优化分页的偏移量 